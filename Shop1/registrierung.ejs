<html>
	<head>
		<title>Registrierung</title>
		<link href="styleregist.css" type="text/css" rel="stylesheet" / > 
		<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"> </script>
		<script type="text/javascript">

			function feuer(){
					  var passwort, benutzer, vorname, nachname, strasse, nr, stadt, user_name, passwort;
						vorname=$("#vorname").val();
						nachname=$("#nachname").val();

						strasse=$("#strasse").val();
						nr=$("#nr").val();
						stadt=$("#stadt").val();
						plz=$("#plz").val();
						user_name=$("#user").val();
						password=$("#password").val();

						var user = new Object();
					  // speichern der Temporären Variablen in die Object-Variable user
					  	user.vorname=vorname;
					  	user.nachname=nachname;
					  	user.password=password;

						user.strasse=strasse;
						user.nr=nr;
						user.stadt=stadt;
					  user.plz=plz;
						user.user_name=user_name;
						user.basket=[];

				$.ajax({
					  async: true,
					  host: "localhost",
					  port: 3001,
					  url: '/users',
					  dataType: 'json',
					  type: 'post',
					  contentType: 'application/json',
					  data: JSON.stringify(user),
					  success: function(data){
					  	if(data==201) alert("Nutzer existiert bereits!");
					  	else {
					  		var neu = data.substr(1, data.length-2);
					  		alert("Registrierung erfolgreich! ID:" +neu);
					  		window.location.href = 'http://localhost:3001/products/' + neu;
					  	}
					  }
				});
			};



		</script>
	</head>
	<body>
		<div id="topBar"> Internet Shop </div>
		<div id="inhalt">  

		<div  id="inhalt1">  
		<h1> Registrierung</h1>
		<form id="form">
			<a> Vorname </a> <br>
			<input type="TEXT" id="vorname" size="40" placeholder="Vorname" required><br>
			<a> Name </a> <br>
			<input type="text" id="nachname" size="40" placeholder="Nachname" required><br>
			<a> Straße </a> <br>
			<input type="text" id="strasse" size="40" placeholder="Straße" required>
			<a> Straßennummer </a><br>
			<input type="number" id="nr" size="4" placeholder="Nummer" required><br>
			<a> Postleitzahl </a><br>
			<input type="number" id="plz" size="7" placeholder="PLZ" required><br>
			<a> Stadt </a><br>
			<input type="text" id="stadt" size="40" placeholder="Stadt" required><br>
			<a> Benutzername </a><br>
			<input type="text" id="user" size="40" placeholder="Benutzername" required><br>
			<a> Passwort </a><br>
			<input type="password" id="password" size="40" placeholder="Passwort" required><br>
			<br>
			<input type="submit" id="sub" value="Registrieren" onClick="feuer();return false;" ><br><br>
		</form>
		<a href="/start">Login</a>
	</div>
</div>
	</body>
</html>
